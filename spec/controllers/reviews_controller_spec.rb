require 'rails_helper'
require 'HTTParty'

RSpec.describe ReviewsController, type: :controller do

  let(:valid_attributes) do
      {
        "backdrop_path":"/uFR8WVPh1eynE3TyzIo2b4ndd4r.jpg","created_by":[{"id":1230593,"credit_id":"5258a535760ee3466169251a","name":"Loren Bouchard","gender":2,"profile_path":"/cyKk7RJsTuUPWLlPZZwRqMZvGt5.jpg"},{"id":1229349,"credit_id":"5258a535760ee34661692520","name":"Jim Dauterive","gender":2,"profile_path":"/cyKk7RJsTuUPWLlPZZwRqMZvGt5.jpg"}],"episode_run_time":[21],"first_air_date":"2011-01-09","genres":[{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"}],"homepage":"http://www.fox.com/bobsburgers/","id":32726,"in_production":true,"languages":["en"],"last_air_date":"2019-05-05","last_episode_to_air":{"air_date":"2019-05-05","episode_number":21,"id":1740425,"name":"P.T.A. It Ain't So","overview":"Linda attempts to become more involved with the P.T.A., inspired by its seemingly perfect president, Joanne. Meanwhile, Bob tries to cheer up a hardware store owner after unknowingly making a joke about his pet parrot that recently flew away","production_code":"","season_number":9,"show_id":32726,"still_path":"/3MsrrhFp8aGBVlShHWz5ijDRhcB.jpg","vote_average":0,"vote_count":0},"name":"Bob's Burgers","next_episode_to_air":{"air_date":"2019-05-12","episode_number":22,"id":1740426,"name":"Yes Without My Zeke","overview":"When Zeke gets in trouble, the Belcher kids and Jimmy Jr. pitch in to help prevent him from being sent to a disciplinary school. However, Tina tries to thwart their mission, so she can have Jimmy Jr. and his butt all to herself. Meanwhile, Randy rents out Bob's Burgers to shoot his independent short feature film.","production_code":"","season_number":9,"show_id":32726,"still_path":"/o2CmRlgenwfZl2EAElL8XRNZzAT.jpg","vote_average":0,"vote_count":0},"networks":[{"name":"FOX","id":19,"logo_path":"/1DSpHrWyOORkL9N2QHX7Adt31mQ.png","origin_country":"US"}],"number_of_episodes":172,"number_of_seasons":9,"origin_country":["US"],"original_language":"en","original_name":"Bob's Burgers","overview":"Bob's Burgers follows a third-generation restaurateur, Bob, as he runs Bob's Burgers with the help of his wife and their three kids. Bob and his quirky family have big ideas about burgers, but fall short on service and sophistication. Despite the greasy counters, lousy location and a dearth of customers, Bob and his family are determined to make Bob's Burgers \"grand re-re-re-opening\" a success.","popularity":73.752,"poster_path":"/Ao5xQ9siHvT9lO7jBFnmtWCKllL.jpg","production_companies":[{"id":1556,"logo_path":"/31h94rG9hzjprXoYNy3L1ErUya2.png","name":"20th Century Fox Television","origin_country":"US"},{"id":30452,"logo_path":"/zmU1ElCS02iL5N7E5MuY4fV7bCX.png","name":"Bento Box Entertainment","origin_country":"US"}],"seasons":[{"air_date":"2012-04-17","episode_count":2,"id":44003,"name":"Specials","overview":"Specials or 'Season 0' refers to the 2 bonus features that were on the series 1 DVD release for Bob's Burgers. Any future releases, if any, will likely be added here.","poster_path":"/wijubCz6LVkLrZYVwqQUGo4UlDz.jpg","season_number":0},{"air_date":"2011-01-09","episode_count":13,"id":44000,"name":"Season 1","overview":"The first season introduces the Belcher familyâ€”father Bob, mother Linda, daughters Louise and Tina Belcher, and their son Gene.","poster_path":"/dbWKCnL9v2QJ4jqRpMODj9e6mdy.jpg","season_number":1},{"air_date":"2012-03-11","episode_count":9,"id":44001,"name":"Season 2","overview":"The second broadcast season of the animated sitcom Bob's Burgers commenced airing on the Fox network in the United States on March 11, 2012, and concluded on May 20, 2012. The season was produced by Wilo Productions, Buck & Millie Productions and Bento Box Entertainment in association with 20th Century Fox Television, and is distributed by 20th Century Fox Home Entertainment, along with its other seasons. Actors H. Jon Benjamin, John Roberts, Dan Mintz, Eugene Mirman and Kristen Schaal reprised their roles as Bob Belcher, Linda Belcher, Tina Belcher, Gene Belcher and Louise Belcher. These characters are all a part of the Belcher family, a nuclear family that run a hamburger restaurant, entitled Bob's Burgers.\n\nFOX renewed the show for a second production cycle consisting of thirteen episodes on April 7, 2011, and picked up the back nine on October 31, 2011, bringing the cycle to a total of 22 episodes. Only nine of the episodes aired during the second season, with the remaining 13 episodes being held for the third season of the show.\n\nLike the previous season, the second season aired in the competitive timeslot at 8:30 p.m. on Sundays. The season premiere, \"The Belchies\" obtained 4.04 million viewers in the United States. The season finale, \"Beefsquatch\" obtained 3.57 million viewers in the United States, slightly down from the season premiere. All of these ratings are measured by Nielsen ratings.","poster_path":"/kBSg6TCM6lL06iT8uMc9cQ8afQE.jpg","season_number":2},{"air_date":"2012-09-30","episode_count":23,"id":44002,"name":"Season 3","overview":"The third broadcast season of the animated sitcom Bob's Burgers began airing on the Fox network in the United States on September 30, 2012, and concluded on May 12, 2013. All main cast members reprised their roles, the season also featured guest stars such as Jon Hamm, Zach Galifianakis, Jeffrey Tambor, Gary Cole and Aziz Ansari.\n\nOn May 14, 2012, Fox renewed Bob's Burgers for a third season consisting of 13 episodes. On August 23, 2012, six additional scripts were ordered. The third season will consist of the 13 episodes from the second production cycle that did not air during the second season, and will also include episodes from the third cycle.","poster_path":"/2xPloPZD7DvlPLMRTdsQi67jbLp.jpg","season_number":3},{"air_date":"2013-09-29","episode_count":22,"id":44004,"name":"Season 4","overview":"The Fourth Season of Bob's Burgers refers to the fourth broadcast season. On October 16, 2012, FOX announced that the show had been renewed for a full 22-episode order of a fourth season. It contains episodes left over from the third production season that were not broadcast in Season 3. Fourth production season episodes started airing in the spring. It finished airing it's run on May 18, 2014.","poster_path":"/ammlPrLGrNPYKt9vvO6ic1waZYf.jpg","season_number":4},{"air_date":"2014-10-05","episode_count":21,"id":63333,"name":"Season 5","overview":"The Fifth Season of Bob's Burgers refers to the fifth broadcast season. On September 26, 2013, FOX announced that the show had been renewed for a full 22-episode order of a fifth season. It aired the remainder of any production season 4 episodes and also some production season 5 episodes. It finished airing on May 17, 2015.","poster_path":"/oNlOSQfHTNjBw6uZJKpBAjuNN01.jpg","season_number":5},{"air_date":"2015-09-27","episode_count":19,"id":68070,"name":"Season 6","overview":"The Sixth Season of Bob's Burgers refers to the sixth broadcast season. On September 26, 2013 Fox renewed the show for a fifth broadcast season and on January 8, 2015 fox ordered a sixth production season of 22 episodes. On September 27, 2015, the show started airing episodes from the fifth production season along with a couple from the sixth production season. It finished airing on May 22, 2016 with it's 100 episode, although that wasn't the 100th episode to air, it was the 107th.","poster_path":"/bsmTDQG0aJQEPUFxwEcMMf5xXV.jpg","season_number":6},{"air_date":"2016-09-25","episode_count":22,"id":80357,"name":"Season 7","overview":"The Seventh Season of Bob's Burgers refers to the seventh broadcast season. Fox renewed the show for a seventh and eighth production season on October 6th 2015. On September 25, 2016, the show started airing episodes from the sixth production season along with a couple from the seventh production season. It finished airing episodes on June 11, 2017 including the bonus episode that originally wasn't part of the run.","poster_path":"/uGQrBoq8RAOJnpGa8SqlsTYkzPH.jpg","season_number":7},{"air_date":"2017-10-01","episode_count":21,"id":93416,"name":"Season 8","overview":"The Eighth Season of Bob's Burgers refers to the eighth broadcast season. On October 7th 2015, the show was renewed for a 7th and 8th production season. On October 1, 2017, the show started airing episodes from the seventh production season along with a couple from the eighth production season.  It finished airing on May 20, 2018 however one episode was never aired during that time. The episode aired on October 7, 2018.","poster_path":"/sc5VC7plpklDL2PTDjcKjrrAmKR.jpg","season_number":8},{"air_date":"2018-09-30","episode_count":22,"id":106926,"name":"Season 9","overview":"The Ninth Season of Bob's Burgers refers to the ninth broadcast season. On October 7th 2015, Fox announced that the show had been renewed for a 7th and 8th production season and with these place holder episodes created the 9th season. On September 30, 2018, the show started airing episodes from the eighth production season along with one episode from the seventh production season. It will likely be airing any production season 9 episodes, if any, near the end of the broadcast season.","poster_path":"/nEuZmYxyoVLsSCydNUp4QqRrBzX.jpg","season_number":9}],"status":"Returning Series","type":"Scripted","vote_average":7.7,"vote_count":263
      }
    end

    describe 'valid attributes for Bobs burgers' do
      it 'should match these attributes' do
        expect(valid_attributes[:name]).to eq "Bob's Burgers"
        expect(valid_attributes[:id]).to eq 32726
        expect(valid_attributes[:created_by][0][:name]).to eq 'Loren Bouchard'
        expect(valid_attributes[:networks][0][:name]).to eq 'FOX'
      end
    end


    let(:valid_session) { {} }

    describe 'GET #index' do
      it 'returns a success response' do
        get :index, params: {}, session: valid_session
        expect(response).to be_successful
      end
    end

    describe 'GET #show' do
      it 'returns a success response' do
        review = valid_attributes
        expect(response).to be_successful
      end
    end
  end
